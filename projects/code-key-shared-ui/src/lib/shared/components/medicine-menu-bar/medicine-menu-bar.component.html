<nav class="medicine-menu-bar navbar navbar-expand-lg navbar-dark">
  <div class="container-fluid">
    <!-- Mobile Menu Toggle Button -->
    <button
      class="navbar-toggler"
      type="button"
      (click)="toggleMobileMenu()"
      [attr.aria-expanded]="!isCollapsed"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Menu -->
    <div class="navbar-collapse" [class.collapse]="isCollapsed" [class.show]="!isCollapsed">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- Main Navigation Tabs -->
        <li
          class="nav-item"
          *ngFor="let tab of menuTabs; trackBy: trackByFn"
          [class.dropdown]="tab.childs && tab.childs.length > 0"
        >
          <!-- Regular Tab -->
          <a
            *ngIf="!tab.childs || tab.childs.length === 0"
            class="nav-link"
            [class.active]="tab.isActive"
            [routerLink]="tab.target"
            [fragment]="tab.fragment"
            (click)="onTabClick(tab, $event)"
            [attr.aria-current]="tab.isActive ? 'page' : null"
          >
            <i *ngIf="tab.icon" [class]="tab.icon" class="me-2"></i>
            {{ tab.title }}
          </a>

          <!-- Dropdown Tab -->
          <div *ngIf="tab.childs && tab.childs.length > 0" class="dropdown">
            <a
              class="nav-link dropdown-toggle"
              [class.active]="tab.isActive"
              href="#"
              role="button"
              (click)="onTabClick(tab, $event)"
              [attr.aria-expanded]="activeDropdown === tab.id"
              aria-haspopup="true"
            >
              <i *ngIf="tab.icon" [class]="tab.icon" class="me-2"></i>
              {{ tab.title }}
            </a>

            <!-- Dropdown Menu -->
            <ul
              class="dropdown-menu"
              [class.show]="activeDropdown === tab.id"
              [attr.aria-labelledby]="'dropdown-' + tab.id"
            >
              <li *ngFor="let subTab of tab.childs; trackBy: trackByFn">
                <a
                  class="dropdown-item"
                  [class.active]="subTab.isActive"
                  [routerLink]="subTab.target"
                  [fragment]="subTab.fragment"
                  (click)="onSubTabClick(subTab, tab, $event)"
                >
                  <i *ngIf="subTab.icon" [class]="subTab.icon" class="me-2"></i>
                  {{ subTab.title }}
                </a>
              </li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Right Side Menu Items (Optional) -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#" role="button">
            <i class="fas fa-search me-1"></i>
            Search
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" role="button">
            <i class="fas fa-user me-1"></i>
            Login
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Click outside to close dropdown -->
  <div
    class="dropdown-overlay"
    *ngIf="activeDropdown"
    (click)="closeDropdown()"
  ></div>
</nav>
